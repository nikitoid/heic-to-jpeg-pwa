<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HEIC to JPEG Converter</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <script src="heic2any.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/dist/umd.js"></script>
  </head>
  <body>
    <main class="container">
      <header>
        <button
          id="theme-toggle"
          class="icon-button"
          aria-label="Переключить тему"
        ></button>
        <h1>HEIC to JPEG Converter</h1>
        <button
          id="settings-btn"
          class="icon-button"
          aria-label="Настройки"
        ></button>
      </header>

      <div class="upload-container">
        <label for="file-input" class="upload-button">Выберите файлы</label>
        <input
          type="file"
          id="file-input"
          multiple
          accept="image/heic,image/heif"
        />
      </div>

      <div class="quality-container">
        <label for="quality-slider"
          >Качество JPEG: <span id="quality-value">90</span>%</label
        >
        <input type="range" id="quality-slider" min="1" max="100" value="90" />
      </div>

      <p id="progress-indicator"></p>

      <div id="results-grid" class="results-grid"></div>

      <button id="download-all" disabled>Скачать все</button>
    </main>

    <div id="settings-screen" style="display: none">
      <div class="settings-content">
        <div class="settings-header">
          <h2>Настройки</h2>
          <button id="close-settings-btn" class="icon-button">&times;</button>
        </div>

        <div class="settings-card">
          <h4>Формат и качество</h4>
          <div class="setting-item range-slider">
            <label for="default-quality-slider">Качество JPEG</label>
            <div class="slider-container">
              <input
                type="range"
                id="default-quality-slider"
                min="1"
                max="100"
              />
              <span id="default-quality-value">90%</span>
            </div>
          </div>
          <div class="setting-item toggle">
            <label for="format-jpeg">JPEG</label>
            <label class="toggle-switch">
              <input
                type="radio"
                id="format-jpeg"
                name="output-format"
                value="jpeg"
                checked
              />
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item toggle">
            <label for="format-png">PNG (без потерь)</label>
            <label class="toggle-switch">
              <input
                type="radio"
                id="format-png"
                name="output-format"
                value="png"
              />
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-card">
          <h4>Способ сохранения</h4>
          <div class="setting-item toggle">
            <label for="save-mode-browser">Скачивание через браузер</label>
            <label class="toggle-switch">
              <input
                type="radio"
                id="save-mode-browser"
                name="save-mode"
                value="browser"
                checked
              />
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item toggle">
            <label for="save-mode-direct">Прямое сохранение</label>
            <label class="toggle-switch">
              <input
                type="radio"
                id="save-mode-direct"
                name="save-mode"
                value="direct"
              />
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div id="directory-picker-container" class="hidden">
            <div class="dir-picker-input" id="dir-picker-input">
              <span class="dir-picker-icon"></span>
              <span id="dir-path" class="dir-picker-text"
                >Папка не выбрана</span
              >
              <button id="select-dir-btn">Изменить</button>
            </div>
          </div>
        </div>

        <button id="save-settings-button">Применить и закрыть</button>
      </div>
    </div>

    <div id="lightbox" class="lightbox">
      <span class="lightbox-close">&times;</span>
      <button id="prev-btn" class="lightbox-nav prev"><</button>
      <button id="next-btn" class="lightbox-nav next">></button>
      <div class="lightbox-content">
        <img id="lightbox-img" />
        <p id="lightbox-filename" class="lightbox-info"></p>
        <button id="lightbox-action-btn" class="lightbox-action-btn"></button>
      </div>
      <div id="lightbox-file-info" class="lightbox-file-info"></div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
